<h2 class="mb-4">Books Catalogue</h2>

<% if (books.length > 0) { %>
  <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 g-3">
    <% books.forEach(book => { %>
      <div class="col">
        <div class="card h-100 shadow-sm text-center">
          <% if (book.isbn) { %>
            <a href="/books/<%= book.book_id %>">
              <img
                src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-M.jpg"
                class="card-img-top book-cover"
                alt="Cover of <%= book.title %>"
                style="height: 150px; object-fit: cover;"
              />
            </a>
          <% } else { %>
            <a href="/books/<%= book.book_id %>">
              <div class="bg-light d-flex align-items-center justify-content-center text-muted" style="height: 150px;">
                No cover
              </div>
            </a>
          <% } %>

          <div class="card-body p-2">
            <h6 class="card-title mb-1 text-truncate">
              <a href="/books/<%= book.book_id %>" class="text-decoration-none text-dark stretched-link">
                <%= book.title %>
              </a>
            </h6>
            <p class="text-muted small mb-0 text-truncate">
              <%= book.authors && book.authors.length ? book.authors.join(", ") : "Unknown author" %>
            </p>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
<% } else { %>
  <div class="alert alert-info">No books found.</div>
<% } %>
