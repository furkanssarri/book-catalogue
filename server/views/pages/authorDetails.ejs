<div class="container py-5">
  <% if (errorMessage) { %>
    <!-- Dark overlay background -->
    <div class="modal-backdrop fade show" style="background-color: rgba(0, 0, 0, 0.5);"></div>

    <!-- Modal -->
    <div class="modal fade show" id="errorModal" tabindex="-1" aria-modal="true" style="display:block;">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-lg">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title">Deletion Failed</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              onclick="document.getElementById('errorModal').style.display='none'; document.querySelector('.modal-backdrop').remove();">
            </button>
          </div>

          <div class="modal-body">
            <p>
              <%= errorMessage %>
            </p>

            <% if (booksByAuthor && booksByAuthor.length> 0) { %>
              <p class="fw-semibold mt-3">Books linked to this author:</p>
              <ul class="list-group list-group-flush">
                <% booksByAuthor.forEach(book=> { %>
                  <li class="list-group-item d-flex align-items-center">
                    <i class="bi bi-book me-2 text-danger"></i>
                    <a href="/books/<%= book.book_id %>" class="text-decoration-none text-dark fw-semibold">
                      <%= book.title %>
                    </a>
                  </li>
                  <% }) %>
              </ul>
              <% } %>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary"
              onclick="document.getElementById('errorModal').style.display='none'; document.querySelector('.modal-backdrop').remove();">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <% } %>
      <% if (author) { %>
        <div class="row">
          <!-- Author Info -->
          <div class="col-lg-8 mx-auto">
            <div class="card shadow-sm">
              <div class="card-body py-5">
                <h1 class="card-title fw-bold mb-3">
                  <%= author.name %>
                </h1>
                <h5 class="text-muted mb-4">
                  <i class="bi bi-geo-alt me-2"></i>
                  <%= author.country || "Unknown" %>
                </h5>
                <p class="card-text fs-6" style="white-space: pre-line;">
                  <%= author.bio || "No biography available for this author." %>
                </p>
                <div class="mt-4 d-flex gap-2">
                  <a href="/authors/<%= author.author_id %>/edit" class="btn btn-primary">
                    <i class="bi bi-pencil-square"></i> Edit Author
                  </a>
                  <form method="POST" action="/authors/<%= author.author_id %>/delete">
                    <input type="hidden" name="_method" value="DELETE">
                    <button type="submit" class="btn btn-danger">
                      <i class="bi bi-trash"></i> Delete Author
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% } else { %>
          <p class="text-center text-muted">Author not found.</p>
          <% } %>
</div>